image: python:3.11-slim

variables:
  UV_VERSION: "0.9.16"
  UV_CACHE_DIR: ".cache/uv"

stages:
  - test
  - lint

cache:
  paths:
    - .cache/uv

before_script:
  - pip install uv
  - uv sync --extra dev

test_cli:
  stage: test
  script:
    - uv run pytest -q tests

test_ui:
  stage: test
  script:
    - uv run python -m compileall gui/xolo_gui

linting:
  stage: lint
  script:
    - uv run ruff check cli core dcc gui
  allow_failure: true
